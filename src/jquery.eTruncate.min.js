(function($)
{var eTruncate=function(container,options)
{var self=this;self.version="1.0";self.defaultOptions={elements:".more",createButton:true,buttonContainer:null,buttonCode:'<span><a href="#"></a></span>',showText:"More",showClass:"show",hideText:"Less",hideClass:"hide",startStatus:"hidden"};self.options=$.extend({},self.defaultOptions,options);self.container=container;var init=function()
{self.elements=self.container.find(self.options.elements);if(self.options.createButton&&self.elements.length>0)
createButton();setStartStatus();}
var createButton=function()
{if(self.options.buttonContainer===null)
self.buttonContainer=self.container;else
self.buttonContainer=$(self.options.buttonContainer);self.button=$(self.options.buttonCode).appendTo(self.buttonContainer);self.innerButton=self.button.find("a").click(function(){self.toggleElements();return false;});}
var setStartStatus=function()
{switch(self.options.startStatus)
{case"hidden":self.hideElements();break;case"show":self.showElements();break;default:throw"InvalidStartStatusException";}}
self.hideElements=function()
{self.elements.hide();self.status="hidden";if(self.innerButton)
{self.innerButton.removeClass(self.options.hideClass).addClass(self.options.showClass).html(self.options.showText);}
self.container.trigger("ElementStatusChanged",[self,self.status]);}
self.showElements=function()
{self.elements.show();self.status="show";if(self.innerButton)
{self.innerButton.removeClass(self.options.showClass).addClass(self.options.hideClass).html(self.options.hideText);}
self.container.trigger("ElementStatusChanged",[self,self.status]);}
self.toggleElements=function()
{if(self.status=="show")
self.hideElements();else if(self.status=="hidden")
self.showElements();}
init();}
$.fn.eTruncate=function(options)
{return this.each(function(){new eTruncate($(this),options);});}})(jQuery);